<?php

if(!$not_show&&$line>6)
    return;
    $seconds=\common\models\Matrix::find()->where(['parent_id'=>$current->id])->orderBy(['position'=>SORT_ASC])->all();

    $cnt_users=$first->countUsersInLine($line);
    echo'<div class="game_line active">';
    echo'<div class="game_line_num">'.$line.'</div>
                <div class="game_line_count">'.$cnt_users.'/'.(pow(3,$line)).'</div>';
    echo'<div class="game_line_list">';

    foreach ($seconds as $second)
    {
        ?>
        <div class="game_line_item game_line_item_show" data-id="<?php echo $second->id?>" data-line="<?php echo $line?>" data-first="<?php echo $first->id?>">
            <svg xmlns="http://www.w3.org/2000/svg" width="80" height="86" viewBox="0 0 80 86">
                <path class="cls-1" d="M0.482,29.764a182.675,182.675,0,0,0,0,25.792c0.606,7.1,3.345,10.478,8.463,14.754,5.673,4.74,15.234,9.96,22.193,12.9,6.2,2.616,11.281,2.44,16.926,0,6.417-2.773,15.977-7.829,22.193-12.9,5.161-4.208,7.829-8.643,8.463-14.754a161.042,161.042,0,0,0,0-25.792c-0.743-7.312-3.01-10.623-8.463-14.754a126.025,126.025,0,0,0-22.193-12.9,19.735,19.735,0,0,0-16.926,0A144.7,144.7,0,0,0,8.946,15.01C3.318,19.236,1.092,23.05.482,29.764Z"/>
                <path class="cls-2" d="M2.542,30.443a173.066,173.066,0,0,0,0,24.436C3.116,61.6,5.712,64.8,10.56,68.856c5.375,4.491,14.432,9.436,21.025,12.218a18.784,18.784,0,0,0,16.036,0c6.079-2.627,15.137-7.418,21.025-12.218,4.89-3.987,7.417-8.188,8.018-13.978a152.552,152.552,0,0,0,0-24.436c-0.7-6.927-2.851-10.064-8.018-13.978A119.4,119.4,0,0,0,47.621,4.246a18.7,18.7,0,0,0-16.036,0A137.083,137.083,0,0,0,10.56,16.464C5.229,20.468,3.12,24.081,2.542,30.443Z"/>
                <path class="cls-3" d="M59.17,49.594c-2.727-3.6-6.88-6.4-11.037-4.152a14.457,14.457,0,0,1-8.254,1.7,14.458,14.458,0,0,1-8.254-1.7c-4.157-2.247-8.31.548-11.037,4.152-1.189,1.571-1.286,2.62-.556,4.744,2.142,6.235,3.232,8.412,6.323,10.6a21.892,21.892,0,0,0,13.524,4.277A21.891,21.891,0,0,0,53.4,64.938c3.091-2.187,4.182-4.365,6.323-10.6C60.456,52.215,60.359,51.165,59.17,49.594ZM46.191,18.466a12.541,12.541,0,0,0-6.717-1.838A12.8,12.8,0,0,0,32.6,18.466c-2.145,1.72-4.174,4.206-4.025,7.386a46.372,46.372,0,0,0,.9,7.456,10.686,10.686,0,0,0,3.542,6.465c2.605,2.545,3.9,3.435,6.377,3.435s3.781-.89,6.386-3.435a10.686,10.686,0,0,0,3.542-6.465,46.418,46.418,0,0,0,.9-7.456C50.365,22.672,48.336,20.187,46.191,18.466Z"/>
            </svg>
            <p class="num">I</p>
            <p class="score"></p>
        </div>
        <?php



    }
    for($i=1;$i<=3-count($seconds);$i++)
    {
        ?>
        <div class="game_line_item empty">
            <svg xmlns="http://www.w3.org/2000/svg" width="59" height="64" viewBox="0 0 59 64">
                <path fill="#1f2220" d="M0.453,22.437a135.409,135.409,0,0,0,0,19.119c0.449,5.263,2.48,7.767,6.274,10.937,4.205,3.514,11.292,7.383,16.451,9.56a14.7,14.7,0,0,0,12.547,0c4.757-2.056,11.844-5.8,16.451-9.56,3.826-3.119,5.8-6.407,6.273-10.937a119.368,119.368,0,0,0,0-19.119c-0.55-5.42-2.231-7.875-6.273-10.937a93.4,93.4,0,0,0-16.451-9.56,14.629,14.629,0,0,0-12.547,0A107.25,107.25,0,0,0,6.727,11.5C2.555,14.633.9,17.46,0.453,22.437Z"/>
            </svg>
        </div>
        <?php
    }
    echo'</div>';
    $can_take=$user->canTakeFromLevel($first->level,$line);
    $sum=($cnt_users*\common\models\Config::$percents[$line]*\common\models\Config::$LEVELS[$first->level]);
    if($line<=6&&!$not_show)
        echo'<a data-line="'.$line.'" href="'.(($can_take||!$sum)?'javascript:void(0)':'#add_user_popup').'" class="game_line_status '.($can_take?'success_status':'lock_status').' '.(($can_take||!$sum)?'':'popup_open').'">'.$sum.' â‚½</a>';
    echo '</div>';

?>